{
	"info": {
		"_postman_id": "vms-analytics-api",
		"name": "VMS Analytics API",
		"description": "API collection for Video Management System Analytics Service - Camera management, event storage, and snapshot retrieval endpoints",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "vms-analytics"
	},
	"item": [
		{
			"name": "Cameras",
			"item": [
				{
					"name": "Register Cameras",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[\n  {\n    \"camera_id\": \"camera_001\",\n    \"status\": \"active\",\n    \"stream_url\": \"rtsp://admin:password@192.168.1.100:554/stream1\",\n    \"parameters\": {\n      \"detection_classes\": [\"person\", \"car\", \"truck\"],\n      \"confidence_threshold\": 0.5,\n      \"roi_zones\": [\n        {\n          \"name\": \"entrance\",\n          \"points\": [[0.1, 0.1], [0.9, 0.1], [0.9, 0.9], [0.1, 0.9]]\n        }\n      ],\n      \"enable_motion_detection\": true,\n      \"enable_object_detection\": true,\n      \"enable_anpr\": false,\n      \"motion_threshold\": 0.1,\n      \"frame_skip\": 1,\n      \"max_fps\": 30,\n      \"enable_object_tracking\": true,\n      \"track_buffer_frames\": 30,\n      \"min_dwell_time_seconds\": 1.0,\n      \"tracking_confidence_threshold\": 0.3,\n      \"motion_cooldown_seconds\": 2.0,\n      \"anpr_cooldown_seconds\": 3.0,\n      \"retention_days\": 30\n    }\n  }\n]",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/cameras",
							"host": ["{{base_url}}"],
							"path": ["api", "cameras"]
						},
						"description": "Register and start processing one or more camera streams. Accepts a list of camera configurations."
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\n  {\n    \"camera_id\": \"camera_001\",\n    \"stream_url\": \"rtsp://example.com/stream\",\n    \"status\": \"active\"\n  }\n]"
								},
								"url": {
									"raw": "{{base_url}}/api/cameras",
									"host": ["{{base_url}}"],
									"path": ["api", "cameras"]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"message\": \"Processed 1 camera(s)\",\n  \"results\": {\n    \"success\": [\"camera_001\"],\n    \"failed\": []\n  }\n}"
						}
					]
				},
				{
					"name": "Register Multiple Cameras",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[\n  {\n    \"camera_id\": \"entrance_cam\",\n    \"stream_url\": \"rtsp://admin:pass@192.168.1.100:554/stream\",\n    \"status\": \"active\",\n    \"parameters\": {\n      \"detection_classes\": [\"person\"],\n      \"confidence_threshold\": 0.6,\n      \"enable_object_tracking\": true,\n      \"retention_days\": 7\n    }\n  },\n  {\n    \"camera_id\": \"parking_cam\",\n    \"stream_url\": \"rtsp://admin:pass@192.168.1.101:554/stream\",\n    \"status\": \"active\",\n    \"parameters\": {\n      \"detection_classes\": [\"car\", \"truck\"],\n      \"enable_anpr\": true,\n      \"anpr_cooldown_seconds\": 5.0,\n      \"retention_days\": 14\n    }\n  }\n]",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/cameras",
							"host": ["{{base_url}}"],
							"path": ["api", "cameras"]
						},
						"description": "Example of registering multiple cameras at once"
					},
					"response": []
				},
				{
					"name": "List All Cameras",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/cameras",
							"host": ["{{base_url}}"],
							"path": ["api", "cameras"]
						},
						"description": "Get a list of all active cameras and their configurations"
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/cameras",
									"host": ["{{base_url}}"],
									"path": ["api", "cameras"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"cameras\": [\n    {\n      \"camera_id\": \"camera_001\",\n      \"status\": \"active\",\n      \"stream_url\": \"rtsp://example.com/stream\",\n      \"parameters\": {\n        \"detection_classes\": [\"person\", \"car\", \"truck\"],\n        \"confidence_threshold\": 0.5,\n        \"roi_zones\": [],\n        \"enable_motion_detection\": true,\n        \"enable_object_detection\": true,\n        \"enable_anpr\": false,\n        \"motion_threshold\": 0.1,\n        \"frame_skip\": 1,\n        \"max_fps\": 30,\n        \"enable_object_tracking\": true,\n        \"track_buffer_frames\": 30,\n        \"min_dwell_time_seconds\": 1.0,\n        \"tracking_confidence_threshold\": 0.3,\n        \"motion_cooldown_seconds\": 2.0,\n        \"anpr_cooldown_seconds\": 3.0,\n        \"retention_days\": 30\n      }\n    }\n  ],\n  \"count\": 1\n}"
						}
					]
				},
				{
					"name": "Get Camera by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/cameras/camera_001",
							"host": ["{{base_url}}"],
							"path": ["api", "cameras", "camera_001"]
						},
						"description": "Get configuration details for a specific camera"
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/cameras/camera_001",
									"host": ["{{base_url}}"],
									"path": ["api", "cameras", "camera_001"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"camera_id\": \"camera_001\",\n  \"status\": \"active\",\n  \"stream_url\": \"rtsp://example.com/stream\",\n  \"parameters\": {\n    \"detection_classes\": [\"person\", \"car\", \"truck\"],\n    \"confidence_threshold\": 0.5,\n    \"roi_zones\": [],\n    \"enable_motion_detection\": true,\n    \"enable_object_detection\": true,\n    \"enable_anpr\": false,\n    \"motion_threshold\": 0.1,\n    \"frame_skip\": 1,\n    \"max_fps\": 30,\n    \"enable_object_tracking\": true,\n    \"track_buffer_frames\": 30,\n    \"min_dwell_time_seconds\": 1.0,\n    \"tracking_confidence_threshold\": 0.3,\n    \"motion_cooldown_seconds\": 2.0,\n    \"anpr_cooldown_seconds\": 3.0,\n    \"retention_days\": 30\n  }\n}"
						},
						{
							"name": "Not Found",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/cameras/invalid_camera",
									"host": ["{{base_url}}"],
									"path": ["api", "cameras", "invalid_camera"]
								}
							},
							"status": "Not Found",
							"code": 404,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"detail\": \"Camera invalid_camera not found\"\n}"
						}
					]
				},
				{
					"name": "Delete Camera",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/cameras/camera_001",
							"host": ["{{base_url}}"],
							"path": ["api", "cameras", "camera_001"]
						},
						"description": "Stop processing and remove a camera from the system"
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/cameras/camera_001",
									"host": ["{{base_url}}"],
									"path": ["api", "cameras", "camera_001"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"message\": \"Camera camera_001 stopped and removed successfully\"\n}"
						},
						{
							"name": "Not Found",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/cameras/invalid_camera",
									"host": ["{{base_url}}"],
									"path": ["api", "cameras", "invalid_camera"]
								}
							},
							"status": "Not Found",
							"code": 404,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"detail\": \"Camera invalid_camera not found\"\n}"
						}
					]
				}
			],
			"description": "Camera management endpoints for registering, listing, and removing cameras"
		},
		{
			"name": "Events & Snapshots",
			"item": [
				{
					"name": "List Events",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/events?page=1&page_size=50",
							"host": ["{{base_url}}"],
							"path": ["api", "events"],
							"query": [
								{
									"key": "page",
									"value": "1",
									"description": "Page number (default: 1)"
								},
								{
									"key": "page_size",
									"value": "50",
									"description": "Items per page (default: 50, max: 500)"
								},
								{
									"key": "camera_id",
									"value": "camera_001",
									"description": "Filter by camera ID",
									"disabled": true
								},
								{
									"key": "event_type",
									"value": "motion",
									"description": "Filter by event type (detection, motion, anpr, tracking)",
									"disabled": true
								},
								{
									"key": "start_time",
									"value": "2024-01-01T00:00:00",
									"description": "Start timestamp (ISO format)",
									"disabled": true
								},
								{
									"key": "end_time",
									"value": "2024-12-31T23:59:59",
									"description": "End timestamp (ISO format)",
									"disabled": true
								}
							]
						},
						"description": "List all events with optional filtering by camera, event type, and date range. Supports pagination."
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/events?page=1&page_size=10",
									"host": ["{{base_url}}"],
									"path": ["api", "events"],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "page_size",
											"value": "10"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"events\": [\n    {\n      \"id\": 1,\n      \"event_type\": \"tracking\",\n      \"camera_id\": \"camera_001\",\n      \"timestamp\": \"2024-03-15T10:30:45.123456\",\n      \"frame_number\": 1234,\n      \"snapshot_path\": \"camera_001/2024-03-15/tracking_103045_123456.png\",\n      \"event_data\": {\n        \"track_id\": 42,\n        \"tracking_action\": \"entered\",\n        \"class_name\": \"person\",\n        \"confidence\": 0.95,\n        \"bounding_box\": {\n          \"x\": 0.1,\n          \"y\": 0.2,\n          \"width\": 0.3,\n          \"height\": 0.4\n        }\n      },\n      \"created_at\": \"2024-03-15T10:30:45.123456\"\n    }\n  ],\n  \"total\": 150,\n  \"page\": 1,\n  \"page_size\": 10,\n  \"has_more\": true\n}"
						}
					]
				},
				{
					"name": "List Events - Filter by Camera",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/events?camera_id=camera_001&page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "events"],
							"query": [
								{
									"key": "camera_id",
									"value": "camera_001"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								}
							]
						},
						"description": "Get events for a specific camera"
					},
					"response": []
				},
				{
					"name": "List Events - Filter by Type",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/events?event_type=motion&page=1&page_size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "events"],
							"query": [
								{
									"key": "event_type",
									"value": "motion"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "20"
								}
							]
						},
						"description": "Get only motion events"
					},
					"response": []
				},
				{
					"name": "List Events - Date Range",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/events?start_time=2024-03-15T00:00:00&end_time=2024-03-15T23:59:59&page=1&page_size=50",
							"host": ["{{base_url}}"],
							"path": ["api", "events"],
							"query": [
								{
									"key": "start_time",
									"value": "2024-03-15T00:00:00"
								},
								{
									"key": "end_time",
									"value": "2024-03-15T23:59:59"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "50"
								}
							]
						},
						"description": "Get events within a specific date range"
					},
					"response": []
				},
				{
					"name": "Get Event Statistics",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/events/stats",
							"host": ["{{base_url}}"],
							"path": ["api", "events", "stats"],
							"query": [
								{
									"key": "camera_id",
									"value": "camera_001",
									"description": "Filter by camera ID",
									"disabled": true
								},
								{
									"key": "start_time",
									"value": "2024-01-01T00:00:00",
									"description": "Start timestamp",
									"disabled": true
								},
								{
									"key": "end_time",
									"value": "2024-12-31T23:59:59",
									"description": "End timestamp",
									"disabled": true
								}
							]
						},
						"description": "Get event statistics including total count, breakdown by type and camera, and date range"
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/events/stats",
									"host": ["{{base_url}}"],
									"path": ["api", "events", "stats"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"total_events\": 1523,\n  \"events_by_type\": {\n    \"detection\": 456,\n    \"motion\": 789,\n    \"anpr\": 123,\n    \"tracking\": 155\n  },\n  \"events_by_camera\": {\n    \"camera_001\": 800,\n    \"camera_002\": 723\n  },\n  \"date_range\": {\n    \"first_event\": \"2024-03-01T00:00:00\",\n    \"last_event\": \"2024-03-15T23:59:59\"\n  }\n}"
						}
					]
				},
				{
					"name": "Get Event by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/events/1",
							"host": ["{{base_url}}"],
							"path": ["api", "events", "1"]
						},
						"description": "Get details of a specific event by its ID"
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/events/1",
									"host": ["{{base_url}}"],
									"path": ["api", "events", "1"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"id\": 1,\n  \"event_type\": \"tracking\",\n  \"camera_id\": \"camera_001\",\n  \"timestamp\": \"2024-03-15T10:30:45.123456\",\n  \"frame_number\": 1234,\n  \"snapshot_path\": \"camera_001/2024-03-15/tracking_103045_123456.png\",\n  \"event_data\": {\n    \"track_id\": 42,\n    \"tracking_action\": \"entered\",\n    \"class_name\": \"person\",\n    \"confidence\": 0.95,\n    \"bounding_box\": {\n      \"x\": 0.1,\n      \"y\": 0.2,\n      \"width\": 0.3,\n      \"height\": 0.4\n    },\n    \"dwell_time_seconds\": null,\n    \"model_info\": {\n      \"model_type\": \"yolov8n\",\n      \"version\": \"8.1.0\"\n    }\n  },\n  \"created_at\": \"2024-03-15T10:30:45.123456\"\n}"
						},
						{
							"name": "Not Found",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/events/999",
									"host": ["{{base_url}}"],
									"path": ["api", "events", "999"]
								}
							},
							"status": "Not Found",
							"code": 404,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"detail\": \"Event 999 not found\"\n}"
						}
					]
				},
				{
					"name": "Get Event Snapshot",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/events/1/snapshot",
							"host": ["{{base_url}}"],
							"path": ["api", "events", "1", "snapshot"]
						},
						"description": "Download the snapshot image for a specific event. Returns PNG image with bounding boxes drawn."
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/events/1/snapshot",
									"host": ["{{base_url}}"],
									"path": ["api", "events", "1", "snapshot"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "png",
							"header": [
								{
									"key": "Content-Type",
									"value": "image/png"
								},
								{
									"key": "Content-Disposition",
									"value": "attachment; filename=\"event_1_snapshot.png\""
								}
							],
							"cookie": [],
							"body": ""
						},
						{
							"name": "Not Found - No Snapshot",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/events/1/snapshot",
									"host": ["{{base_url}}"],
									"path": ["api", "events", "1", "snapshot"]
								}
							},
							"status": "Not Found",
							"code": 404,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"detail\": \"No snapshot available for event 1\"\n}"
						}
					]
				},
				{
					"name": "Delete Event",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/events/1?delete_snapshot=false",
							"host": ["{{base_url}}"],
							"path": ["api", "events", "1"],
							"query": [
								{
									"key": "delete_snapshot",
									"value": "false",
									"description": "Also delete the snapshot file (default: false)"
								}
							]
						},
						"description": "Delete a specific event. Optionally also delete the associated snapshot file."
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/events/1?delete_snapshot=true",
									"host": ["{{base_url}}"],
									"path": ["api", "events", "1"],
									"query": [
										{
											"key": "delete_snapshot",
											"value": "true"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"message\": \"Event 1 deleted successfully\",\n  \"snapshot_deleted\": true\n}"
						},
						{
							"name": "Not Found",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/events/999",
									"host": ["{{base_url}}"],
									"path": ["api", "events", "999"]
								}
							},
							"status": "Not Found",
							"code": 404,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"detail\": \"Event 999 not found\"\n}"
						}
					]
				}
			],
			"description": "Event storage and snapshot retrieval endpoints. Query events with filtering, get statistics, and download snapshot images with bounding boxes."
		},
		{
			"name": "Retention Management",
			"item": [
				{
					"name": "Get Retention Statistics",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/retention/stats",
							"host": ["{{base_url}}"],
							"path": ["api", "retention", "stats"]
						},
						"description": "Get retention statistics for all cameras including total events, events within retention period, and events that can be cleaned up"
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/retention/stats",
									"host": ["{{base_url}}"],
									"path": ["api", "retention", "stats"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"message\": \"Retention statistics retrieved successfully\",\n  \"stats\": {\n    \"camera_001\": {\n      \"retention_days\": 30,\n      \"total_events\": 1500,\n      \"events_within_retention\": 1200,\n      \"events_outside_retention\": 300,\n      \"oldest_event\": \"2024-01-01T00:00:00\",\n      \"newest_event\": \"2024-01-31T23:59:59\",\n      \"cutoff_date\": \"2024-01-01T00:00:00\"\n    },\n    \"camera_002\": {\n      \"retention_days\": 7,\n      \"total_events\": 500,\n      \"events_within_retention\": 450,\n      \"events_outside_retention\": 50,\n      \"oldest_event\": \"2024-01-20T00:00:00\",\n      \"newest_event\": \"2024-01-31T23:59:59\",\n      \"cutoff_date\": \"2024-01-24T00:00:00\"\n    }\n  },\n  \"total_cameras\": 2\n}"
						}
					]
				},
				{
					"name": "Manual Cleanup - All Cameras",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/retention/cleanup",
							"host": ["{{base_url}}"],
							"path": ["api", "retention", "cleanup"]
						},
						"description": "Manually trigger retention cleanup for all cameras. This will delete events and snapshots older than each camera's retention period."
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/retention/cleanup",
									"host": ["{{base_url}}"],
									"path": ["api", "retention", "cleanup"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"message\": \"Manual cleanup completed\",\n  \"results\": {\n    \"camera_001\": {\n      \"deleted_events\": 300,\n      \"deleted_snapshots\": 250,\n      \"retention_days\": 30\n    },\n    \"camera_002\": {\n      \"deleted_events\": 50,\n      \"deleted_snapshots\": 45,\n      \"retention_days\": 7\n    }\n  },\n  \"summary\": {\n    \"total_deleted_events\": 350,\n    \"total_deleted_snapshots\": 295,\n    \"cameras_processed\": 2\n  }\n}"
						}
					]
				},
				{
					"name": "Manual Cleanup - Specific Camera",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/retention/cleanup/camera_001",
							"host": ["{{base_url}}"],
							"path": ["api", "retention", "cleanup", "camera_001"]
						},
						"description": "Manually trigger retention cleanup for a specific camera. Replace 'camera_001' with the actual camera ID."
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/retention/cleanup/camera_001",
									"host": ["{{base_url}}"],
									"path": ["api", "retention", "cleanup", "camera_001"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"message\": \"Cleanup completed for camera camera_001\",\n  \"camera_id\": \"camera_001\",\n  \"retention_days\": 30,\n  \"deleted_events\": 150,\n  \"deleted_snapshots\": 120\n}"
						},
						{
							"name": "Camera Not Found",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/retention/cleanup/invalid_camera",
									"host": ["{{base_url}}"],
									"path": ["api", "retention", "cleanup", "invalid_camera"]
								}
							},
							"status": "Not Found",
							"code": 404,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"detail\": \"Camera invalid_camera not found\"\n}"
						}
					]
				},
				{
					"name": "Get Scheduler Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/retention/scheduler/status",
							"host": ["{{base_url}}"],
							"path": ["api", "retention", "scheduler", "status"]
						},
						"description": "Get the current status of the retention scheduler including running state, last cleanup time, and next scheduled cleanup"
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/retention/scheduler/status",
									"host": ["{{base_url}}"],
									"path": ["api", "retention", "scheduler", "status"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"message\": \"Scheduler status retrieved successfully\",\n  \"scheduler\": {\n    \"running\": true,\n    \"cleanup_interval_hours\": 24,\n    \"last_cleanup\": \"2024-01-31T02:00:00\",\n    \"next_cleanup\": \"2024-02-01T02:00:00\",\n    \"thread_alive\": true\n  }\n}"
						}
					]
				},
				{
					"name": "Start Scheduler",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/retention/scheduler/start",
							"host": ["{{base_url}}"],
							"path": ["api", "retention", "scheduler", "start"]
						},
						"description": "Start the retention scheduler. The scheduler runs automatically every 24 hours to clean up old events."
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/retention/scheduler/start",
									"host": ["{{base_url}}"],
									"path": ["api", "retention", "scheduler", "start"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"message\": \"Retention scheduler started successfully\",\n  \"status\": \"started\"\n}"
						}
					]
				},
				{
					"name": "Stop Scheduler",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/retention/scheduler/stop",
							"host": ["{{base_url}}"],
							"path": ["api", "retention", "scheduler", "stop"]
						},
						"description": "Stop the retention scheduler. This will prevent automatic cleanup from running."
					},
					"response": [
						{
							"name": "Success",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/retention/scheduler/stop",
									"host": ["{{base_url}}"],
									"path": ["api", "retention", "scheduler", "stop"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"message\": \"Retention scheduler stopped successfully\",\n  \"status\": \"stopped\"\n}"
						}
					]
				}
			],
			"description": "Event retention management endpoints for configuring cleanup policies, monitoring retention statistics, and managing the automatic cleanup scheduler"
		},
		{
			"name": "Health",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/health",
							"host": ["{{base_url}}"],
							"path": ["api", "health"]
						},
						"description": "Check the health status of the Analytics service"
					},
					"response": [
						{
							"name": "Healthy",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/health",
									"host": ["{{base_url}}"],
									"path": ["api", "health"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"status\": \"healthy\",\n  \"redis_connected\": true,\n  \"active_cameras\": 2\n}"
						},
						{
							"name": "Degraded",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/health",
									"host": ["{{base_url}}"],
									"path": ["api", "health"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"status\": \"degraded\",\n  \"redis_connected\": false,\n  \"active_cameras\": 2\n}"
						}
					]
				}
			],
			"description": "Health check endpoints"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8069",
			"type": "string"
		}
	]
}
